Version: "0.1"
Environment:
  Name: Robot Battle
  Description: Simple environment with 4 robots with simple hand-to-hand combat actions. There's also health bars generated by custom shaders
  Observers:
    Block2D:
      TileSize: 24
    Sprite2D:
      ResourceConfig:
        ShaderPath: shaders/
      Shader:
        ObjectVariables: [ health, max_health ]
      TileSize: 24
      BackgroundTile: oryx/oryx_fantasy/floor1-1.png
    Vector:
      IncludePlayerId: true
      IncludeVariables: true
  Player:
    Count: 4
    Observer:
      RotateWithAvatar: true
      TrackAvatar: true
      Height: 9
      Width: 9
      OffsetX: 0
      OffsetY: 0
    AvatarObject: robot

  Levels:
    - |
      W   W   W   W   W   W   W   W   W
      W   f1  .   .  .    .   .   f2  W
      W   .   .   .   .   .   .   .   W
      W   .   .   .   .   .   .   .   W
      W   .   .   .   .   .   .   .   W
      W   .   .   .   .   .   .   .   W
      W   .   .   .   .   .   .   .   W
      W   .   .   .   .   .   .   .   W
      W   f4  .   .   .   .   .   f3  W
      W   W   W   W   W   W   W   W   W

Actions:

  - Name: attack
    Behaviours:
      - Src:
          Object: robot
          Preconditions:
            - neq: [ src._playerId, dst._playerId ]
          Commands:
            - reward: 1
        Dst:
          Object: robot
          Commands:
            - reward: -1
            - decr: health
            - lte:
                Arguments: [ health, 0 ]
                Commands:
                  - reward: -10
                  - remove: true

  - Name: move
    Behaviours:
      - Src:
          Object: [ robot, moveable_wall ]
          Commands:
            - mov: _dest
        Dst:
          Object: _empty

      - Src:
          Object: robot
          Commands:
            - mov: _dest
        Dst:
          Object: moveable_wall
          Commands:
            - cascade: _dest

Objects:
  - Name: robot
    MapCharacter: f
    Variables:
      - Name: health
        InitialValue: 10
      - Name: max_health
        InitialValue: 10
    Observers:
      Sprite2D:
        - Image: oryx/oryx_fantasy/avatars/robot1.png

  - Name: moveable_wall
    MapCharacter: m
    Observers:
      Sprite2D:
        - Image: oryx/oryx_fantasy/wall4-0.png

  - Name: fixed_wall
    MapCharacter: W
    Observers:
      Sprite2D:
        - TilingMode: WALL_16
          Image:
            - oryx/oryx_fantasy/wall2-0.png
            - oryx/oryx_fantasy/wall2-1.png
            - oryx/oryx_fantasy/wall2-2.png
            - oryx/oryx_fantasy/wall2-3.png
            - oryx/oryx_fantasy/wall2-4.png
            - oryx/oryx_fantasy/wall2-5.png
            - oryx/oryx_fantasy/wall2-6.png
            - oryx/oryx_fantasy/wall2-7.png
            - oryx/oryx_fantasy/wall2-8.png
            - oryx/oryx_fantasy/wall2-9.png
            - oryx/oryx_fantasy/wall2-10.png
            - oryx/oryx_fantasy/wall2-11.png
            - oryx/oryx_fantasy/wall2-12.png
            - oryx/oryx_fantasy/wall2-13.png
            - oryx/oryx_fantasy/wall2-14.png
            - oryx/oryx_fantasy/wall2-15.png
