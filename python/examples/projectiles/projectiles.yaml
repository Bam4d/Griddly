Version: "0.1"
Environment:
  Name: Spider Throwing Fire
  Description: The spider can now throw fireballs
  Observers:
    Block2D:
      TileSize: 24
    Isometric:
      TileSize: [ 32, 48 ]
      IsoTileHeight: 16
      IsoTileDepth: 4
      BackgroundTile: oryx/oryx_iso_dungeon/grass-1.png
    Vector:
      IncludePlayerId: true
  Player:
    AvatarObject: spider
  Levels:
    - |
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  g  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .
      .  .  .  .  w  w  w  w  w  w  w  w  .  .  .  .

Actions:

#  - Name: spider_projectile
#    InputMapping:
#      Internal: true
#    Behaviours:
#      - Src:
#          Object: spider
#          Commands:
#            - mov: _dest
#            - eq:
#                Arguments: [ range, 0 ]
#                Commands:
#                  - remove: true
#            - gt:
#                Arguments: [ range, 0 ]
#                Commands:
#                  - exec:
#                      Action: spider_projectile
#        Dst:
#          Object: [ _empty, water ]
#
#  - Name: fire_spider
#    Probability: 1.0
#    InputMapping:
#      Inputs:
#        1:
#          VectorToDest: [ 1,0 ]
#    Behaviours:
#      - Src:
#          Object: gnome
#        Dst:
#          Object: [ water, _empty ]
#          Commands:
#            - spawn: spider

  - Name: move
#    InputMapping:
#      Inputs:
#        1:
#          VectorToDest: [ 0,1 ]
#        2:
#          VectorToDest: [ 0,-1 ]
    Behaviours:
      - Src:
          Object: gnome
          Commands:
            - mov: _dest
        Dst:
          Object: _empty

Objects:
  - Name: spider
    InitialActions:
      - Action: spider_projectile
        Delay: 1
    Variables:
      - Name: range
        InitialValue: 4
    MapCharacter: s
    Observers:
      Isometric:
        - Image: oryx/oryx_iso_dungeon/avatars/spider-1.png
      Block2D:
        - Shape: triangle
          Color: [ 0.9, 0.2, 0.2 ]
          Scale: 1.0

  - Name: gnome
    Z: 2
    MapCharacter: g
    Observers:
      Isometric:
        - Image: oryx/oryx_iso_dungeon/avatars/gnome-1.png
      Block2D:
        - Color: [ 0.0, 0.8, 0.0 ]
          Shape: square

  - Name: water
    MapCharacter: w
    Observers:
      Isometric:
        - Image: oryx/oryx_iso_dungeon/water-1.png
          Offset: [ 0, 4 ]
      Block2D:
        - Color: [ 0.0, 0.0, 0.8 ]
          Shape: square