Version: "0.1"
Environment:
  Name: sokoban
  TileSize: 24
  BackgroundTile: images/gvgai/newset/floor2.png
  Player:
    Mode: SINGLE # This is only a single player game
    Actions:
      DirectControl: avatar # The player can only control a single avatar in the game
  Termination:
    Win:
      - eq: [box:count, 0] # If there are no boxes left
  Levels:
    - |
      wwwwwww
      w..hA.w
      w.whw.w
      w...b.w
      whbb.ww
      w..wwww
      wwwwwww
    - |
      wwwwwwwww
      ww.h....w
      ww...bA.w
      w....w..w
      wwwbw...w
      www...w.w
      wwwh....w
      wwwwwwwww
      
Actions:
# Define the move action
  - Name: move
    Behaviours:
      # The agent can move around freely in empty space and over holes
      - Src:
          Type: avatar
          Cmd:
            - mov: _dest
        Dst:
          Type: [_empty, hole]
      
      # Boxes can move into empty space
      - Src:
          Type: box
          Cmd:
            - mov: _dest
        Dst:
          Type: _empty

      # The agent can push boxes
      - Src:
          Type: avatar
          Cmd:
            - mov: _dest
        Dst:
          Type: box
          Cmd:
            - cascade: _dest

      # If a box is moved into a hole remove it
      - Src:
          Type: box
          Cmd:
            - remove: true
            - reward: 1
        Dst:
          Type: hole

Objects:
  - Name: box
    Z: 2
    MapCharacter: b
    Observers:
      Sprite2D:
        Image: images/gvgai/newset/block1.png

  - Name: wall
    MapCharacter: w
    Observers:
      Sprite2D:
        TilingMode: WALL_16
        Image:
          - images/gvgai/oryx/wall3_0.png
          - images/gvgai/oryx/wall3_1.png
          - images/gvgai/oryx/wall3_2.png
          - images/gvgai/oryx/wall3_3.png
          - images/gvgai/oryx/wall3_4.png
          - images/gvgai/oryx/wall3_5.png
          - images/gvgai/oryx/wall3_6.png
          - images/gvgai/oryx/wall3_7.png
          - images/gvgai/oryx/wall3_8.png
          - images/gvgai/oryx/wall3_9.png
          - images/gvgai/oryx/wall3_10.png
          - images/gvgai/oryx/wall3_11.png
          - images/gvgai/oryx/wall3_12.png
          - images/gvgai/oryx/wall3_13.png
          - images/gvgai/oryx/wall3_14.png
          - images/gvgai/oryx/wall3_15.png

  - Name: hole
    Z: 1
    MapCharacter: h
    Observers:
      Sprite2D:
        Image: images/gvgai/oryx/cspell4.png

  - Name: avatar
    Z: 2  
    MapCharacter: A
    Observers:
      Sprite2D:
        Image: images/gvgai/oryx/knight1.png
